-- -----------------------------------------------------
-- Schema hoa_db
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS hoa_db;
CREATE SCHEMA IF NOT EXISTS hoa_db;
USE hoa_db;

-- -----------------------------------------------------
-- Table regions
-- -----------------------------------------------------
DROP TABLE IF EXISTS regions;
CREATE TABLE IF NOT EXISTS regions (
region VARCHAR(45) NOT NULL,
PRIMARY KEY (`region`)
);
-- -----------------------------------------------------
-- Table provinces
-- -----------------------------------------------------
DROP TABLE IF EXISTS provinces;
CREATE TABLE IF NOT EXISTS provinces (
province_name VARCHAR(45) NOT NULL,
region VARCHAR(45) NOT NULL,
PRIMARY KEY (province_name),
INDEX (region ASC),
FOREIGN KEY (region)
REFERENCES regions(region)
);
-- -----------------------------------------------------
-- Table cities
-- -----------------------------------------------------
DROP TABLE IF EXISTS cities;
CREATE TABLE IF NOT EXISTS cities (
city VARCHAR(45) NOT NULL,
province VARCHAR(45) NOT NULL,
PRIMARY KEY (city),
INDEX (province ASC),
FOREIGN KEY (province)
REFERENCES provinces(province_name)
);
-- -----------------------------------------------------
-- Table zipcodes
-- -----------------------------------------------------
DROP TABLE IF EXISTS zipcodes;
CREATE TABLE IF NOT EXISTS zipcodes (
zipcode INT NOT NULL,
brgy VARCHAR(45) NOT NULL,
city VARCHAR(45) NOT NULL,
province VARCHAR(45) NOT NULL,
PRIMARY KEY (zipcode),
INDEX (city ASC),
INDEX (province ASC),
FOREIGN KEY (city)
REFERENCES cities(city),
FOREIGN KEY (province)
REFERENCES provinces(province_name)
);
-- -----------------------------------------------------
-- Table address
-- -----------------------------------------------------
DROP TABLE IF EXISTS address;
CREATE TABLE IF NOT EXISTS address (
address_id INT NOT NULL,
stno VARCHAR(45) NOT NULL,
stname VARCHAR(45) NOT NULL,
brgy VARCHAR(45) NOT NULL,
city VARCHAR(45) NOT NULL,
province VARCHAR(45) NOT NULL,
zipcode INT NOT NULL,
x_coord FLOAT NOT NULL,
y_coord FLOAT NOT NULL,
PRIMARY KEY (address_id),
INDEX (city ASC),
INDEX (province ASC),
INDEX (zipcode ASC),
FOREIGN KEY (city)
REFERENCES cities(city),
FOREIGN KEY (province)
REFERENCES provinces(province_name),
FOREIGN KEY (zipcode)
REFERENCES zipcodes(zipcode)
);
-- -----------------------------------------------------
-- Table hoa
-- -----------------------------------------------------
DROP TABLE IF EXISTS hoa;
CREATE TABLE IF NOT EXISTS hoa (
hoa_name VARCHAR(45) NOT NULL,
office_add INT NOT NULL,
year_est INT(4) NOT NULL,
website VARCHAR(45) NULL,
subd_name VARCHAR(45) NOT NULL,
dues_collection VARCHAR(45) NOT NULL,
PRIMARY KEY (hoa_name),
UNIQUE INDEX (subd_name ASC),
INDEX (office_add ASC),
FOREIGN KEY (office_add)
REFERENCES address(address_id)
);
-- -----------------------------------------------------
-- Table individual
-- -----------------------------------------------------
DROP TABLE IF EXISTS individual;
CREATE TABLE IF NOT EXISTS individual (
individual_id INT NOT NULL,
indiv_lastname VARCHAR(45) NOT NULL,
indiv_firstname VARCHAR(45) NOT NULL,
indiv_mi VARCHAR(45) NOT NULL,
email VARCHAR(45) NOT NULL,
birthday DATE NOT NULL,
gender ENUM('M', 'F') NOT NULL,
fb_url VARCHAR(45) NULL,
picture BLOB NOT NULL,
indiv_type ENUM('R', 'H', 'HR') NOT NULL,
PRIMARY KEY (individual_id),
UNIQUE INDEX (email ASC),
UNIQUE INDEX (fb_url ASC)
);
-- -----------------------------------------------------
-- Table homeowner
-- -----------------------------------------------------
DROP TABLE IF EXISTS homeowner;
CREATE TABLE IF NOT EXISTS homeowner (
homeowner_id INT(5) NOT NULL,
years_ho INT(2) NOT NULL,
undertaking TINYINT(1) NOT NULL,
membership TINYINT(1) NOT NULL,
is_resident TINYINT(1) NOT NULL,
current_add INT NOT NULL,
other_add INT NULL,
other_email VARCHAR(45) NULL,
hoa_name VARCHAR(45) NOT NULL,
individual_id INT NOT NULL,
PRIMARY KEY (homeowner_id),
INDEX (hoa_name ASC),
INDEX (current_add ASC),
INDEX (other_add ASC),
INDEX (individual_id ASC),
FOREIGN KEY (hoa_name)
REFERENCES hoa(hoa_name),
FOREIGN KEY (current_add)
REFERENCES address(address_id),
FOREIGN KEY (other_add)
REFERENCES address(address_id),
FOREIGN KEY (individual_id)
REFERENCES individual(individual_id)
);
-- -----------------------------------------------------
-- Table officer_positions
-- -----------------------------------------------------
DROP TABLE IF EXISTS officer_positions;
CREATE TABLE IF NOT EXISTS officer_positions (
position_name VARCHAR(25) NOT NULL,
PRIMARY KEY (position_name)
);
-- -----------------------------------------------------
-- Table elections
-- -----------------------------------------------------
DROP TABLE IF EXISTS elections;
CREATE TABLE IF NOT EXISTS elections (
elec_date DATE NOT NULL,
venue VARCHAR(45) NOT NULL,
quorum TINYINT(1) NOT NULL,
witness_lastname VARCHAR(45) NOT NULL,
witness_firstname VARCHAR(45) NOT NULL,
witness_mi VARCHAR(45) NOT NULL,
witness_mobile BIGINT(10) NOT NULL,
hoa_name VARCHAR(45) NOT NULL,
PRIMARY KEY (elec_date),
FOREIGN KEY (hoa_name)
REFERENCES hoa(hoa_name)
);
-- -----------------------------------------------------
-- Table hoa_officer
-- -----------------------------------------------------
DROP TABLE IF EXISTS hoa_officer;
CREATE TABLE IF NOT EXISTS hoa_officer (
officer_id INT(5) NOT NULL,
homeowner_id INT(5) NOT NULL,
position_name VARCHAR(25) NOT NULL,
office_start DATE NOT NULL,
office_end DATE NOT NULL,
elec_date DATE NOT NULL,
PRIMARY KEY (officer_id),
INDEX (homeowner_id ASC),
INDEX (position_name ASC),
INDEX (elec_date ASC),
FOREIGN KEY (homeowner_id)
REFERENCES homeowner(homeowner_id),
FOREIGN KEY (position_name)
REFERENCES officer_positions(position_name),
FOREIGN KEY (elec_date)
REFERENCES elections(elec_date)
);
-- -----------------------------------------------------
-- Table hoa_files
-- -----------------------------------------------------
DROP TABLE IF EXISTS hoa_files;
CREATE TABLE IF NOT EXISTS hoa_files (
file_id INT NOT NULL,
file_name VARCHAR(45) NOT NULL,
description VARCHAR(45) NOT NULL,
location VARCHAR(45) NOT NULL,
file_type ENUM('document', 'spreadsheet', 'pdf',
'image', 'others') NOT NULL,
date_submitted DATETIME NOT NULL,
file_owner VARCHAR(45) NOT NULL,
file_uploader INT(5) NOT NULL,
hoa_name VARCHAR(45) NOT NULL,
PRIMARY KEY (file_id),
INDEX (hoa_name ASC),
INDEX (file_uploader ASC),
FOREIGN KEY (hoa_name)
REFERENCES hoa(hoa_name),
FOREIGN KEY (file_uploader)
REFERENCES hoa_officer(officer_id)
);
-- -----------------------------------------------------
-- Table property
-- -----------------------------------------------------
DROP TABLE IF EXISTS property;
CREATE TABLE IF NOT EXISTS property (
property_code VARCHAR(6) NOT NULL,
size DECIMAL NOT NULL,
turnover DATE NOT NULL,
property_type ENUM('R', 'C') NOT NULL,
homeowner_id INT(5) NOT NULL,
PRIMARY KEY (property_code),
INDEX (homeowner_id ASC),
FOREIGN KEY (homeowner_id)
REFERENCES homeowner(homeowner_id)
);
-- -----------------------------------------------------
-- Table household
-- -----------------------------------------------------
DROP TABLE IF EXISTS household;
CREATE TABLE IF NOT EXISTS household (
household_id INT(5) NOT NULL,
PRIMARY KEY (household_id)
);
-- -----------------------------------------------------
-- Table resident
-- -----------------------------------------------------
DROP TABLE IF EXISTS resident;
CREATE TABLE IF NOT EXISTS resident (
resident_id INT(5) NOT NULL,
is_renter TINYINT(1) NOT NULL,
relation_ho VARCHAR(45) NOT NULL,
undertaking TINYINT(1) NOT NULL,
household_id INT(5) NOT NULL,
authorized_resident TINYINT(1) NOT NULL,
individual_id INT NOT NULL,
PRIMARY KEY (resident_id),
INDEX (household_id ASC),
INDEX (individual_id ASC),
FOREIGN KEY (household_id)
REFERENCES household(household_id),
FOREIGN KEY (individual_id)
REFERENCES individual(individual_id)
);
-- -----------------------------------------------------
-- Table receipt
-- -----------------------------------------------------
DROP TABLE IF EXISTS receipt;
CREATE TABLE IF NOT EXISTS receipt (
or_no INT NOT NULL,
transact_date DATETIME NOT NULL,
total_amount FLOAT NOT NULL,
PRIMARY KEY (or_no)
);
-- -----------------------------------------------------
-- Table resident_idcard
-- -----------------------------------------------------
DROP TABLE IF EXISTS resident_idcard;
CREATE TABLE IF NOT EXISTS resident_idcard (
resident_idcardno VARCHAR(10) NOT NULL,
date_requested DATETIME NOT NULL,
request_reason VARCHAR(45) NOT NULL,
date_issued DATETIME NOT NULL,
authorizing_officer VARCHAR(45) NOT NULL,
or_no INT NULL,
amount_paid FLOAT NOT NULL,
id_status ENUM('Active', 'Inactive', 'Lost')
NOT NULL,
resident_id INT(5) NOT NULL,
PRIMARY KEY (resident_idcardno),
INDEX (resident_id ASC),
INDEX (or_no ASC),
FOREIGN KEY (resident_id)
REFERENCES resident(resident_id),
FOREIGN KEY (or_no)
REFERENCES receipt (or_no)
);
-- -----------------------------------------------------
-- Table mobile
-- -----------------------------------------------------
DROP TABLE IF EXISTS mobile;
CREATE TABLE IF NOT EXISTS mobile (
mobile_no BIGINT(10) NOT NULL,
individual_id INT NOT NULL,
PRIMARY KEY (mobile_no),
INDEX (individual_id ASC),
FOREIGN KEY (individual_id)
REFERENCES individual(individual_id)
);
-- -----------------------------------------------------
-- Table vehicle
-- -----------------------------------------------------
DROP TABLE IF EXISTS vehicle;
CREATE TABLE IF NOT EXISTS vehicle (
plate_no VARCHAR(7) NOT NULL,
owner_lastname VARCHAR(45) NOT NULL,
owner_firstname VARCHAR(45) NOT NULL,
owner_mi VARCHAR(45) NOT NULL,
resident_id INT(5) NULL,
vehicle_class ENUM('P', 'C') NOT NULL,
vehicle_type ENUM('sedan', 'SUV', 'MPV/AUV', 'van',
'truck', 'motorcycle/scooter', 'others') NOT NULL,
date_registered DATETIME NOT NULL,
reg_fee DECIMAL NOT NULL,
or_no INT NOT NULL,
PRIMARY KEY (plate_no),
INDEX (resident_id ASC),
INDEX (or_no ASC),
FOREIGN KEY (resident_id)
REFERENCES resident(resident_id),
FOREIGN KEY (or_no)
REFERENCES receipt(or_no)
);
-- -----------------------------------------------------
-- Table orcr
-- -----------------------------------------------------
DROP TABLE IF EXISTS orcr;
CREATE TABLE IF NOT EXISTS orcr (
orcr VARCHAR(45) NOT NULL,
plate_no VARCHAR(7) NOT NULL,
years_valid VARCHAR(45) NOT NULL,
orcr_file INT NOT NULL,
PRIMARY KEY (orcr),
INDEX (plate_no ASC),
INDEX (orcr_file ASC),
FOREIGN KEY (plate_no)
REFERENCES vehicle(plate_no),
FOREIGN KEY (orcr_file)
REFERENCES hoa_files(file_id)
);
-- -----------------------------------------------------
-- Table sticker
-- -----------------------------------------------------
DROP TABLE IF EXISTS sticker;
CREATE TABLE IF NOT EXISTS sticker (
sticker_id INT NOT NULL,
year_valid INT(4) NOT NULL,
plate_no VARCHAR(7) NOT NULL,
owner_type ENUM('R', 'NR') NOT NULL,
authorizing_officer INT(5) NOT NULL,
date_acquired DATETIME NOT NULL,
amount_paid DECIMAL NOT NULL,
or_no INT NULL,
PRIMARY KEY (sticker_id),
INDEX (plate_no ASC),
INDEX (authorizing_officer ASC),
INDEX (or_no ASC),
FOREIGN KEY (plate_no)
REFERENCES vehicle(plate_no),
FOREIGN KEY (authorizing_officer)
REFERENCES hoa_officer(officer_id),
FOREIGN KEY (or_no)
REFERENCES receipt(or_no)
);
-- -----------------------------------------------------
-- Table hoaofficer_sched
-- -----------------------------------------------------
DROP TABLE IF EXISTS hoaofficer_sched;
CREATE TABLE IF NOT EXISTS hoaofficer_sched (
officer_id INT(5) NOT NULL,
sched_time ENUM('AM', 'PM') NOT NULL,
avail_Mon TINYINT(1) NULL,
avail_Tue TINYINT(1) NULL,
avail_Wed TINYINT(1) NULL,
avail_Thu TINYINT(1) NULL,
avail_Fri TINYINT(1) NULL,
avail_Sat TINYINT(1) NULL,
avail_Sun TINYINT(1) NULL,
PRIMARY KEY (officer_id, sched_time),
INDEX (officer_id ASC),
FOREIGN KEY (officer_id)
REFERENCES hoa_officer(officer_id)
);
-- -----------------------------------------------------
-- Table asset
-- -----------------------------------------------------
DROP TABLE IF EXISTS asset;
CREATE TABLE IF NOT EXISTS asset (
asset_id VARCHAR(10) NOT NULL,
asset_name VARCHAR(45) NOT NULL,
description VARCHAR(45) NOT NULL,
date_acquired DATE NOT NULL,
for_rent TINYINT(1) NOT NULL,
asset_value FLOAT NOT NULL,
asset_type ENUM('P', 'E', 'F', 'O') NOT NULL,
asset_status ENUM('W', 'DE', 'FR', 'FD', 'DI') NOT NULL,
location VARCHAR(45) NOT NULL,
location_x FLOAT NOT NULL,
location_y FLOAT NOT NULL,
hoa_name VARCHAR(45) NOT NULL,
asset_container VARCHAR(10) NULL,
PRIMARY KEY (asset_id),
INDEX (hoa_name ASC),
INDEX (asset_container ASC),
FOREIGN KEY (hoa_name)
REFERENCES hoa(hoa_name),
FOREIGN KEY (asset_container)
REFERENCES asset(asset_id)
);
-- -----------------------------------------------------
-- Table commercial_prop
-- -----------------------------------------------------
DROP TABLE IF EXISTS commercial_prop;
CREATE TABLE IF NOT EXISTS commercial_prop (
property_code VARCHAR(6) NOT NULL,
commercial_type ENUM('O', 'L', 'R', 'M') NOT NULL,
commercial_maxten INT NOT NULL,
INDEX (property_code ASC),
PRIMARY KEY (property_code),
FOREIGN KEY (property_code)
REFERENCES property(property_code)
);
-- -----------------------------------------------------
-- Table residential_prop
-- -----------------------------------------------------
DROP TABLE IF EXISTS residential_prop;
CREATE TABLE IF NOT EXISTS residential_prop (
property_code VARCHAR(6) NOT NULL,
household_id INT(5) NOT NULL,
INDEX (property_code ASC),
PRIMARY KEY (property_code),
INDEX (household_id ASC),
FOREIGN KEY (property_code)
REFERENCES property(property_code),
FOREIGN KEY (household_id)
REFERENCES household(household_id)
);

CREATE TABLE IF NOT EXISTS Rules
(
	RuleNumber INT PRIMARY KEY NOT NULL,
    RuleDescription VARCHAR(1000) NOT NULL
);

CREATE TABLE IF NOT EXISTS AssetActivity
(
	AssetActivityID INT(8) PRIMARY KEY NOT NULL,
    asset_id VARCHAR(10) NOT NULL,
    Activity_Description VARCHAR(45) NOT NULL,
    Activity_Date DATE NOT NULL,
    incharge_firstname VARCHAR(45) NOT NULL,
    incharge_lastname VARCHAR(45) NOT NULL,
    incharge_mi VARCHAR(3) NOT NULL,
    mobile_no BIGINT NOT NULL,
    activitylocation_x FLOAT NOT NULL,
    activitylocation_y FLOAT NOT NULL,
    or_no INT NOT NULL,
    `Status` ENUM('scheduled', 'ongoing', 'completed', 'deleted') NOT NULL,
    tentative_start DATETIME NOT NULL,
    tentative_end DATETIME NOT NULL,
    actual_start DATETIME NOT NULL,
    actual_end DATETIME NOT NULL,
    officer_id INT(5) NOT NULL,
    hoa_president INT(5) NOT NULL,
    approved TINYINT(1) NOT NULL,
    INDEX `ind_AssetActivity_asset_id` (asset_id),
    INDEX `ind_AssetActivity_mobile_no` (mobile_no),
    INDEX `ind_AssetActivity_or_no` (or_no),
    INDEX `ind_AssetActivity_officer_id` (officer_id),
    INDEX `ind_AssetActivity_hoa_president` (hoa_president),
    CONSTRAINT `fk_AssetActivity_asset_id`
    FOREIGN KEY (asset_id)
    REFERENCES hoa_db.asset (asset_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_AssetActivity_receiptID`
    FOREIGN KEY (or_no)
    REFERENCES hoa_db.receipt (or_no)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_AssetActivity_mobile_no`
    FOREIGN KEY (mobile_no)
    REFERENCES hoa_db.mobile (mobile_no)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_AssetActivity_officer_id`
    FOREIGN KEY (officer_id)
    REFERENCES hoa_db.hoa_officer (officer_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_AssetActivity_hoa_president`
    FOREIGN KEY (hoa_president)
    REFERENCES hoa_db.hoa_officer (officer_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

DROP TABLE BusinessPermit;
CREATE TABLE IF NOT EXISTS BusinessPermit
(
	BusinessPermitID INT PRIMARY KEY NOT NULL,
    Expiration_Date DATE NOT NULL,
    Processing_Officer INT(5) NOT NULL,
    Permit_FileID INT NOT NULL,
    INDEX `ind_BusinessPermit_processing_officer` (Processing_Officer),
    INDEX `ind_BusinessPermit_permit_filename` (Permit_FileID),
    CONSTRAINT `fk_BusinessPermit_processing_officer`
    FOREIGN KEY (Processing_Officer)
    REFERENCES hoa_db.hoa_officer (officer_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_BusinessPermit_permit_fileid`
    FOREIGN KEY (Permit_FileID)
    REFERENCES hoa_db.hoa_files (file_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS Business
(
    Business_Name VARCHAR(45) PRIMARY KEY NOT NULL,
    BusinessOwner_Name VARCHAR(45) UNIQUE NOT NULL,
    Residentship TINYINT(1) NOT NULL,
    Business_Address INT NOT NULL,
    Business_Email VARCHAR(45) NOT NULL,
    Business_Description VARCHAR(45) NOT NULL,
    Business_Type ENUM('Sole Proprietorship', 'Partnership', 'Corporation') NOT NULL,
	Business_StartDATE DATE NOT NULL,
    Business_EndDATE DATE NULL,
    Business_FacebookURL VARCHAR(45) NULL,
    BusinessPermitID INT NOT NULL,
    INDEX `ind_Business_Address` (Business_Address),
    INDEX `ind_Business_Business_Permit_ID` (BusinessPermitID),
    CONSTRAINT `fk_Business_Address`
    FOREIGN KEY (Business_Address)
    REFERENCES hoa_db.address (address_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_Business_Business_Permit_ID` 
    FOREIGN KEY (BusinessPermitID)
    REFERENCES hoa_db.BusinessPermit (BusinessPermitID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS BusinessEmployees
(
	EmployeeID INT PRIMARY KEY NOT NULL,
    Business_Name VARCHAR(45) NOT NULL,
    Employee_LastName VARCHAR(45) NOT NULL,
    Employee_FirstName VARCHAR(45) NOT NULL,
    `Employee_MobileNo.` BIGINT NOT NULL,
    Employee_Position VARCHAR(45) NOT NULL,
    Authorized_Employee TINYINT(1) NOT NULL,
    INDEX `ind_BusinessEmployees_mobile_no` (`Employee_MobileNo.`),
    INDEX `ind_BusinessEmployees_Business_Name` (Business_Name),
    CONSTRAINT `fk_BusinessEmployees_mobile_no`
    FOREIGN KEY (`Employee_MobileNo.`)
    REFERENCES hoa_db.mobile (mobile_no)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_BusinessEmployees_Business_Name`
    FOREIGN KEY (Business_Name)
    REFERENCES hoa_db.Business (Business_Name)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS business_schedule
(
	business_sched_time ENUM('AM', 'PM') NOT NULL,
    Business_Name VARCHAR(45) NOT NULL,
    open_Mon TINYINT(1) NOT NULL,
    open_Tue TINYINT(1) NOT NULL,
    open_Wed TINYINT(1) NOT NULL,
    open_Thu TINYINT(1) NOT NULL,
    open_Fri TINYINT(1) NOT NULL,
    open_Sat TINYINT(1) NOT NULL,
    open_Sun TINYINT(1) NOT NULL,
    PRIMARY KEY (business_sched_time, Business_Name),
    INDEX `ind_business_schedule_business_name` (Business_Name),
    CONSTRAINT `fk_business_schedule_business_name`
    FOREIGN KEY (Business_Name)
    REFERENCES hoa_db.Business (Business_Name)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS Incident
(
	IncidentID INT PRIMARY KEY NOT NULL,
    Incident_Date DATE NOT NULL,
    Incident_Description VARCHAR(45) NOT NULL,
    isResident VARCHAR(45) NOT NULL,
    Business_Involved VARCHAR(45) NOT NULL,
    InvestigatingOfficer_ID INT(5) NOT NULL,
    PenaltyImposed VARCHAR(45) NULL,
    SecondingOfficer_ID INT(5) NOT NULL,
    Seconding_PenaltyImposed VARCHAR(45) NULL,
    INDEX `ind_incident_business_involved` (Business_Involved),
    INDEX `ind_incident_investigating_officer` (InvestigatingOfficer_ID),
    INDEX `ind_incident_seconding_officer` (SecondingOfficer_ID),
    CONSTRAINT `fk_incident_business_involved`
    FOREIGN KEY (Business_Involved)
    REFERENCES hoa_db.Business (Business_Name)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_incident_investigating_officer`
    FOREIGN KEY (InvestigatingOfficer_ID)
    REFERENCES hoa_db.hoa_officer (officer_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_incident_seconding_officer`
    FOREIGN KEY (SecondingOfficer_ID)
    REFERENCES hoa_db.hoa_officer (officer_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS Evidence
(
	EvidenceID INT PRIMARY KEY NOT NULL,
    Evidence_Name VARCHAR(45) NOT NULL,
    Evidence_Description VARCHAR(45) NOT NULL,
    Evidence_FileID INT NOT NULL,
    SubmittingResident INT(5) NOT NULL,
    AcceptingOfficer INT(5) NOT NULL,
    EvidenceSubmission_Date DATE NOT NULL,
    IncidentID INT NOT NULL,
    INDEX `ind_evidence_fileid` (Evidence_FileID),
    INDEX `ind_evidence_submittingresident` (SubmittingResident),
    INDEX `ind_evidence_acceptingofficer` (AcceptingOfficer),
    INDEX `ind_evidence_incidentid` (IncidentID),
    CONSTRAINT `fk_evidence_filename`
    FOREIGN KEY (Evidence_FileID)
    REFERENCES hoa_db.hoa_files (file_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_evidence_submittingresident`
    FOREIGN KEY (SubmittingResident)
    REFERENCES hoa_db.resident (resident_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_evidence_acceptingofficer`
    FOREIGN KEY (AcceptingOfficer)
    REFERENCES hoa_db.hoa_officer (officer_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_evidence_incidentID`
    FOREIGN KEY (IncidentID)
    REFERENCES hoa_db.Incident (IncidentID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS EvidencesUsed
(
	IncidentID INT PRIMARY KEY NOT NULL,
    EvidenceID INT NOT NULL,
    INDEX `ind_evidencesused_incidentID` (IncidentID),
    INDEX `ind_evidencesued_evidenceID` (EvidenceID),
    CONSTRAINT `fk_evidencesused_incidentID`
    FOREIGN KEY (IncidentID)
    REFERENCES hoa_db.Incident (IncidentID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_evidencesued_evidenceID`
    FOREIGN KEY (EvidenceID)
    REFERENCES hoa_db.Evidence (EvidenceID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS PersonsInvolved
(
	IncidentID INT PRIMARY KEY NOT NULL,
    individual_id INT NOT NULL,
    INDEX `ind_personsinvolved_individual_id` (individual_id),
    INDEX `ind_personsinvolved_incidentID` (IncidentID),
    CONSTRAINT `fk_personsinvolved_individual_id`
    FOREIGN KEY (individual_id)
    REFERENCES hoa_db.individual (individual_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_personsinvolvd_incidentID`
    FOREIGN KEY (IncidentID)
    REFERENCES hoa_db.Incident (IncidentID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS Incident_RulesBroken
(
	IncidentID INT PRIMARY KEY NOT NULL,
    RuleNumber INT NOT NULL,
    INDEX `ind_incident_rulenumber` (RuleNumber),
    INDEX `ind_incident_incidentID` (IncidentID),
    CONSTRAINT `fk_incident_rulenumber`
    FOREIGN KEY (RuleNumber)
    REFERENCES hoa_db.Rules (RuleNumber)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_incident_incidentID`
    FOREIGN KEY (IncidentID)
    REFERENCES hoa_db.Incident (IncidentID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS MonthlyDueBill
(
	BillID INT PRIMARY KEY NOT NULL,
    Business_Name VARCHAR(45) NOT NULL,
    `Month` INT NOT NULL,
    `Year` INT NOT NULL,
    Date_Generated DATE NOT NULL,
    Awarded_Discount FLOAT NULL,
    Unpaiid_Dues FLOAT NULL,
    Incurred_Penalties FLOAT NULL,
    Deduction_Amount FLOAT NULL,
    Total_Amount FLOAT NOT NULL,
    Penaltied_Employee INT NOT NULL,
    INDEX `ind_monthlyduebill_business_name` (Business_Name),
    INDEX `ind_monthlyduebill_employeeid` (Penaltied_Employee),
    CONSTRAINT `fk_monthlyduebill_business_name`
    FOREIGN KEY (Business_Name)
    REFERENCES hoa_db.Business (Business_Name)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_monthlyduebill_employeeid`
    FOREIGN KEY (Penaltied_Employee)
    REFERENCES hoa_db.BusinessEmployees (EmployeeID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS BillItems
(
	BillItemID INT PRIMARY KEY NOT NULL,
    BillID INT NOT NULL,
    Description VARCHAR(45) NOT NULL,
    Amount FLOAT NOT NULL,
    INDEX `ind_billitems_billid` (BillID),
    CONSTRAINT `fk_billitems_billid`
    FOREIGN KEY (BillID)
    REFERENCES hoa_db.MonthlyDueBill (BillID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);

CREATE TABLE IF NOT EXISTS Payment
(
	or_no INT PRIMARY KEY NOT NULL,
    BillID INT NOT NULL,
    Date_Of_Payment DATE NOT NULL,
    Payer VARCHAR(45) NOT NULL,
    Receiving_Officer INT(5) NOT NULL,
    Business_Name VARCHAR(45) NOT NULL,
    BusinessOwner_Payer VARCHAR(45) NULL,
    AuthorizedEmployeeID_Payer INT NULL,
    INDEX `ind_payment_billid` (BillID),
    INDEX `ind_payment_receiving_officer` (Receiving_Officer),
    INDEX `ind_payment_businessowner` (BusinessOwner_Payer),
    INDEX `ind_payment_employeeid` (AuthorizedEmployeeID_Payer),
    index `ind_payment_or_no` (or_no),
    CONSTRAINT `fk_payment_billid`
    FOREIGN KEY (BillID)
    REFERENCES hoa_db.MonthlyDueBill (BillID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_payment_receiving_officer` 
    FOREIGN KEY (Receiving_Officer)
    REFERENCES hoa_db.hoa_officer (officer_id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_payment_businessowner`
    FOREIGN KEY (BusinessOwner_Payer)
    REFERENCES hoa_db.Business (BusinessOwner_Name)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_payment_employeeid`
    FOREIGN KEY (AuthorizedEmployeeID_Payer)
    REFERENCES hoa_db.BusinessEmployees (EmployeeID)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_payment_or_no`
    FOREIGN KEY (or_no)
    REFERENCES hoa_db.receipt (or_no)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);
